const translations = {
  id: {
    judulBrand: "JourneyTix",
    subBrand: "Transportasi Masa Kini â€“ Nyaman, Cepat, dan Terpercaya",
    ctaPesan: "Pesan Tiket Sekarang",
    marquee: "ðŸš¨ Promo Spesial: Tiket Diskon hingga 20% hari ini! ðŸš¨ | Hubungi Kami: +62 812-3456-7890 | JourneyTix kini melayani Tiket perjalanan lebih dari 30 kota besar di Indonesia",
    kenapa: "Kenapa Memilih JourneyTix?",
    fitur1: "Kenyamanan",
    desc1: "Kabin bersih, tempat duduk empuk, dan perjalanan bebas khawatir.",
    fitur2: "Cepat & Tepat",
    desc2: "Keberangkatan dan kedatangan sesuai jadwal tanpa keterlambatan.",
    fitur3: "Pesan Online Mudah",
    desc3: "Tanpa antri, cukup klik dan tiket langsung dikirim ke email kamu.",
    ctaTitle: "Dapatkan Tiketmu Hari Ini",
    ctaSub: "Nikmati perjalanan aman dan nyaman bersama JourneyTix",
    ctaBtn: "Pesan Tiket",
    ulasan: "Ulasan Pengguna",
    namaUlasan: "Nama Pengguna",
    tulisUlasan: "Tulis ulasan kamu di bawah",
    placeholderKomentar: "Tulis komentar kamu di sini...",
    kirimUlasan: "Kirim Ulasan",
    komentar1: "Bus nyaman banget, staff ramah, perjalanan tepat waktu. Mantap JourneyTix!",
    komentar2: "Lumayan oke. Tapi mungkin jadwal bisa ditambah untuk rute malam hari."
  },
  en: {
    judulBrand: "JourneyTix",
    subBrand: "Modern Transportation â€“ Comfortable, Fast, and Reliable",
    ctaPesan: "Book Ticket Now",
    marquee: "ðŸš¨ Special Promo: Up to 20% Discount Today! ðŸš¨ | Contact Us: +62 812-3456-7890 | JourneyTix now serves over 30 major cities in Indonesia",
    kenapa: "Why Choose JourneyTix?",
    fitur1: "Comfort",
    desc1: "Clean cabin, soft seats, and worry-free travel.",
    fitur2: "Fast & Punctual",
    desc2: "Departures and arrivals are always on time.",
    fitur3: "Easy Online Booking",
    desc3: "No queues, just click and your ticket is sent to your email.",
    ctaTitle: "Get Your Ticket Today",
    ctaSub: "Enjoy safe and comfortable travel with JourneyTix",
    ctaBtn: "Book Ticket",
    ulasan: "User Reviews",
    namaUlasan: "Username",
    tulisUlasan: "Write your review below",
    placeholderKomentar: "Write your comment here...",
    kirimUlasan: "Submit Review",
    komentar1: "Very comfortable bus, friendly staff, punctual journey. Great job, JourneyTix!",
    komentar2: "Pretty good. Maybe consider adding more night routes."
  },
  jp: {
    judulBrand: "ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼ãƒ†ã‚£ãƒƒã‚¯ã‚¹",
    subBrand: "ç¾ä»£ã®äº¤é€šæ‰‹æ®µ â€“ å¿«é©ã€è¿…é€Ÿã€ä¿¡é ¼æ€§",
    ctaPesan: "ä»Šã™ããƒã‚±ãƒƒãƒˆã‚’äºˆç´„",
    marquee: "ðŸš¨ ç‰¹åˆ¥ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ï¼šæœ¬æ—¥æœ€å¤§20ï¼…å‰²å¼•ãƒã‚±ãƒƒãƒˆï¼ ðŸš¨ | ãŠå•ã„åˆã‚ã›: +62 812-3456-7890 | JourneyTixã¯ç¾åœ¨ã€ã‚¤ãƒ³ãƒ‰ãƒã‚·ã‚¢ã®30ä»¥ä¸Šã®ä¸»è¦éƒ½å¸‚ã§ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ä¸­",
    kenapa: "ãªãœJourneyTixã‚’é¸ã¶ã®ã‹ï¼Ÿ",
    fitur1: "å¿«é©ã•",
    desc1: "æ¸…æ½”ãªã‚­ãƒ£ãƒ“ãƒ³ã€æŸ”ã‚‰ã‹ã„åº§å¸­ã€å¿ƒé…ã®ãªã„æ—…è¡Œã€‚",
    fitur2: "è¿…é€Ÿ & æ­£ç¢º",
    desc2: "å‡ºç™ºã¨åˆ°ç€ã¯å¸¸ã«æ™‚é–“é€šã‚Šã€‚",
    fitur3: "ç°¡å˜ãªã‚ªãƒ³ãƒ©ã‚¤ãƒ³äºˆç´„",
    desc3: "åˆ—ã«ä¸¦ã°ãšã€ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã ã‘ã§ãƒã‚±ãƒƒãƒˆãŒãƒ¡ãƒ¼ãƒ«ã«é€ä¿¡ã•ã‚Œã¾ã™ã€‚",
    ctaTitle: "ä»Šæ—¥ãƒã‚±ãƒƒãƒˆã‚’å…¥æ‰‹",
    ctaSub: "JourneyTixã¨ä¸€ç·’ã«å®‰å…¨ã§å¿«é©ãªæ—…ã‚’æ¥½ã—ã‚‚ã†",
    ctaBtn: "ãƒã‚±ãƒƒãƒˆã‚’äºˆç´„",
    ulasan: "ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¬ãƒ“ãƒ¥ãƒ¼",
    namaUlasan: "ãƒ¦ãƒ¼ã‚¶ãƒ¼å",
    tulisUlasan: "ä¸‹ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
    placeholderKomentar: "ã“ã“ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ›¸ã„ã¦ãã ã•ã„...",
    kirimUlasan: "ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’é€ä¿¡",
    komentar1: "ã¨ã¦ã‚‚å¿«é©ãªãƒã‚¹ã€ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªã‚¹ã‚¿ãƒƒãƒ•ã€æ™‚é–“é€šã‚Šã®æ—…ã€‚ç´ æ™´ã‚‰ã—ã„JourneyTixï¼",
    komentar2: "ã¾ã‚ã¾ã‚è‰¯ã‹ã£ãŸã€‚å¤œã®ãƒ«ãƒ¼ãƒˆã‚’ã‚‚ã£ã¨å¢—ã‚„ã—ã¦ã»ã—ã„ã‹ã‚‚ã€‚"
  }
};

const languageTexts = {
  id: {
    pesawat: "Pesawat",
    kereta: "Kereta",
    bus: "Bus",
    kapal: "Kapal",
    lainnya: "Lainnya",
    rental: "Rental Kendaraan",
    akomodasi: "Akomodasi",
    paket: "Paket Wisata",
    reward: "JourneyPoint",
    bantuan: "Bantuan",
    masuk: "Masuk / Daftar",
    jadwal: "Jadwal",
    tentang: "Tentang",
    kontak: "Kontak",
    bahasa: "ðŸŒID|IDR"
  },
  en: {
    pesawat: "Flight",
    kereta: "Train",
    bus: "Bus",
    kapal: "Ship",
    lainnya: "More",
    rental: "Car Rental",
    akomodasi: "Accommodation",
    paket: "Tour Package",
    reward: "JourneyPoint",
    bantuan: "Help",
    masuk: "Login / Register",
    jadwal: "Schedule",
    tentang: "About",
    kontak: "Contact",
    bahasa: "ðŸŒEN|USD"
  },
  jp: {
    pesawat: "é£›è¡Œæ©Ÿ",
    kereta: "åˆ—è»Š",
    bus: "ãƒã‚¹",
    kapal: "èˆ¹",
    lainnya: "ãã®ä»–",
    rental: "ãƒ¬ãƒ³ã‚¿ã‚«ãƒ¼",
    akomodasi: "å®¿æ³Šæ–½è¨­",
    paket: "è¦³å…‰ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸",
    reward: "ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼ãƒã‚¤ãƒ³ãƒˆ",
    bantuan: "ãƒ˜ãƒ«ãƒ—",
    masuk: "ãƒ­ã‚°ã‚¤ãƒ³ / ç™»éŒ²",
    jadwal: "ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«",
    tentang: "ç´„",
    kontak: "é€£çµ¡å…ˆ",
    bahasa: "ðŸŒJP|JPY"
  }
};

document.addEventListener("DOMContentLoaded", function () {
  const langButtons = document.querySelectorAll(".lang-list li");
  const globeTrigger = document.querySelector(".globe-trigger");
  const modal = document.getElementById("languageCurrencyModal");
  const closeModal = modal.querySelector(".close-modal");

  function applyLanguage(lang) {
  const t = languageTexts[lang];
  const g = translations[lang];

  function safeText(selector, text) {
    const el = document.querySelector(selector);
    if (el) el.innerText = text;
  }

  function safeSetPlaceholder(selector, text) {
    const el = document.querySelector(selector);
    if (el) el.setAttribute("placeholder", text);
  }

  // Update navbar & sidebar
  safeText(".globe-trigger", t.bahasa);
  safeText("a[href*='pesawat.php']", t.pesawat);
  safeText("a[href*='kereta.php']", t.kereta);
  safeText("a[href*='bus.php']", t.bus);
  safeText("a[href*='kapal.php']", t.kapal);
  safeText(".dropdown-toggle", t.lainnya);
  safeText(".dropdown-menu a[href='rental.php']", t.rental);
  safeText(".dropdown-menu a[href='akomodasi.php']", t.akomodasi);
  safeText(".dropdown-menu a[href='paket.php']", t.paket);
  safeText(".dropdown-menu a[href='reward.php']", t.reward);
  safeText(".d-none.d-sm-inline[href='#']:nth-of-type(2)", `â“ ${t.bantuan}`);
  safeText(".btn-outline-light", t.masuk);
  safeText(".sidebar a[href='jadwal.php']", t.jadwal);
  safeText(".sidebar a[href='tentang.php']", t.tentang);
  safeText(".sidebar a[href='kontak.php']", t.kontak);
  safeText(".sidebar a[href='bantuan.php']", t.bantuan);

  // Update data-key
  document.querySelectorAll(".lang").forEach(el => {
    const key = el.getAttribute("data-key");
    if (g[key]) el.innerText = g[key];
  });

  // Update data-placeholder
  document.querySelectorAll("[data-placeholder]").forEach(el => {
    const key = el.getAttribute("data-placeholder");
    if (g[key]) el.setAttribute("placeholder", g[key]);
  });

  localStorage.setItem("lang", lang);
}

  // Cek bahasa tersimpan
  const savedLang = localStorage.getItem("lang") || "id";
  applyLanguage(savedLang);

  // Klik pilihan bahasa
  langButtons.forEach(btn => {
    btn.addEventListener("click", () => {
      const selectedLang = btn.getAttribute("data-lang");
      applyLanguage(selectedLang);
      modal.style.display = "none";
    });
  });

  // Klik globe untuk buka modal
  globeTrigger.addEventListener("click", function (e) {
    e.preventDefault();
    modal.style.display = "flex";
  });

  // Klik tutup modal
  closeModal.addEventListener("click", function () {
    modal.style.display = "none";
  });

  modal.addEventListener("click", function (e) {
    if (e.target === modal) {
      modal.style.display = "none";
    }
  });

  // Tab di dalam modal (opsional)
  const tabButtons = document.querySelectorAll(".tab-btn");
  const tabContents = document.querySelectorAll(".tab-content");

  tabButtons.forEach((btn) => {
    btn.addEventListener("click", () => {
      const target = btn.getAttribute("data-tab");

      tabButtons.forEach((b) => b.classList.remove("active"));
      btn.classList.add("active");

      tabContents.forEach((tab) => {
        tab.classList.toggle("d-none", tab.id !== target);
      });
    });
  });
});
